---
begin: 2021-12-09
status: ongoing
rating: 1
---

# 有限状态机

### 定义
有限状态机（英语：finite-state machine，缩写：FSM），简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。

### 作用

应用FSM模型可以帮助对象生命周期的状态的顺序以及导致状态变化的事件进行管理。将状态和事件控制从不同的业务Service方法的if else中抽离出来。FSM的应用范围很广，对于有复杂状态流，扩展性要求比较高的场景都可以使用该模型。

### 概念
下面是状态机模型中的4个要素，即现态、条件、动作、次态。
- 现态：是指当前所处的状态。
- 条件：又称为“事件”。当一个条件被满足，将会触发一个动作，或者执行一次状态的迁移。
- 动作：条件满足后执行的动作。动作执行完毕后，可以迁移到新的状态，也可以仍旧保持原状态。动作不是必需的，当条件满足后，也可以不执行任何动作，直接迁移到新状态。
     - 进入动作（entry action）：在进入状态时进行
     -  退出动作：在退出状态时进行
     -  输入动作：依赖于当前状态和输入条件进行
     -  转移动作：在进行特定转移时进行
- 次态：条件满足后要迁往的新状态。“次态”是相对于“现态”而言的，“次态”一旦被激活，就转变成新的“现态”了。

### 使用
画图
![](image/Pasted%20image%2020211209122706.png)
状态机表，**横轴是动作，纵轴是状态**
![](image/Pasted%20image%2020211209122728.png)

### 实现

可以使用 [状态模式](design-pattern/状态模式.md) 实现
或者使用 [Spring StateMachine](../springboot/statemachine/Spring%20StateMachine.md)

## 参考链接

[【Spring技术探索】StateMachine状态机设计及实现方案【附源码】_浩宇天尚_51CTO博客](https://blog.51cto.com/alex4dream/2899323)

[状态机选型简记 | 凡隐的博客](http://childe.net.cn/2018/04/28/%E7%8A%B6%E6%80%81%E6%9C%BA%E9%80%89%E5%9E%8B%E7%AE%80%E8%AE%B0/)

[Java状态机调研报告 - 掘金](https://juejin.cn/post/6844904170852450318)

##### 标签
#design #interview 
